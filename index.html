<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ChatGPT Clone</title>

  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel (to transpile JSX at runtime) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: #1a1a1a;
      color: white;
    }
    .message-bubble { animation: fadeIn 0.3s ease-in; }
    @keyframes fadeIn { from {opacity:0;transform:translateY(10px);} to {opacity:1;transform:translateY(0);} }
    .typing-indicator { animation: pulse 1.5s infinite; }
    @keyframes pulse {0%,100%{opacity:1;}50%{opacity:0.5;}}
    .chat-container { scrollbar-width: thin; scrollbar-color: #4a5568 #2d3748; }
    .chat-container::-webkit-scrollbar { width:6px; }
    .chat-container::-webkit-scrollbar-track { background:#2d3748; }
    .chat-container::-webkit-scrollbar-thumb { background:#4a5568; border-radius:3px; }
    .input-area { background: linear-gradient(90deg, #1a1a1a 0%, #2a2a2a 100%); border-top: 1px solid #333; }
    .send-button {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      transition: all 0.2s ease;
    }
    .send-button:hover {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(16,185,129,0.3);
    }
    .welcome-screen { background: radial-gradient(circle at center, #2a2a2a 0%, #1a1a1a 100%); }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // === React ChatGPT Clone ===
    const { useState, useEffect, useRef } = React;

    // Fake AI response generator
    const generateAIResponse = async (message) => {
      await new Promise(r => setTimeout(r, 1000 + Math.random() * 2000));
      const responses = [
        "I understand your question. Let me help you with that.",
        "That's an interesting point you've raised.",
        "I appreciate you asking about this topic.",
        "Thank you for sharing that with me.",
        "Great question! Let me break this down for you.",
        "I can definitely help you with this.",
        "That's a complex topic, but I'll do my best.",
        "I see what you're getting at. Fascinating subject!"
      ];
      const lower = message.toLowerCase();
      if (lower.includes("hello") || lower.includes("hi")) {
        return "Hello! I'm your AI assistant. What would you like to talk about today?";
      }
      return responses[Math.floor(Math.random() * responses.length)];
    };

    const Message = ({ message, isUser, timestamp }) => (
      <div className={`message-bubble flex ${isUser ? 'justify-end':'justify-start'} mb-4`}>
        <div className={`max-w-3xl px-4 py-3 rounded-lg ${isUser ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-100'}`}>
          <div className="whitespace-pre-wrap">{message}</div>
          {timestamp && (
            <div className={`text-xs mt-1 ${isUser ? 'text-blue-200':'text-gray-400'}`}>{timestamp}</div>
          )}
        </div>
      </div>
    );

    const TypingIndicator = () => (
      <div className="flex justify-start mb-4">
        <div className="bg-gray-700 px-4 py-3 rounded-lg">
          <div className="flex space-x-1">
            <div className="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style={{animationDelay:'0ms'}}></div>
            <div className="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style={{animationDelay:'150ms'}}></div>
            <div className="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style={{animationDelay:'300ms'}}></div>
          </div>
        </div>
      </div>
    );

    const WelcomeScreen = () => (
      <div className="welcome-screen flex flex-col items-center justify-center h-full text-center px-8">
        <h1 className="text-3xl font-bold text-gray-100 mb-2">ChatGPT Clone</h1>
        <p className="text-gray-400 text-lg">Your AI Assistant</p>
        <p className="text-gray-500 text-sm mt-6">Start a conversation below. I'm here to help with questions, creative tasks, analysis, coding, and more!</p>
      </div>
    );

    const ChatGPTClone = () => {
      const [messages, setMessages] = useState([]);
      const [inputMessage, setInputMessage] = useState("");
      const [isTyping, setIsTyping] = useState(false);
      const endRef = useRef();

      const scrollToBottom = () => { endRef.current?.scrollIntoView({behavior:"smooth"}); };
      useEffect(scrollToBottom, [messages, isTyping]);

      const sendMessage = async () => {
        if (!inputMessage.trim() || isTyping) return;
        const msg = {id:Date.now(), text:inputMessage, isUser:true, timestamp:new Date().toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"})};
        setMessages(prev=>[...prev, msg]);
        setInputMessage("");
        setIsTyping(true);
        try {
          const reply = await generateAIResponse(inputMessage);
          const aiMsg = {id:Date.now()+1, text:reply, isUser:false, timestamp:new Date().toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"})};
          setMessages(prev=>[...prev, aiMsg]);
        } finally {
          setIsTyping(false);
        }
      };

      return (
        <div className="flex flex-col h-screen bg-gray-900">
          <header className="bg-gray-800 border-b border-gray-700 px-4 py-3 flex justify-between">
            <h1 className="text-xl text-white font-semibold">ChatGPT Clone</h1>
            {messages.length > 0 && <button onClick={()=>setMessages([])} className="px-3 py-1 text-sm bg-red-600 hover:bg-red-700 text-white rounded">Clear Chat</button>}
          </header>
          <div className="flex-1 overflow-hidden">
            <div className="chat-container h-full overflow-y-auto px-4 py-6">
              {messages.length === 0 ? <WelcomeScreen/> :
                <>
                  {messages.map(m=><Message key={m.id} {...m}/>)}
                  {isTyping && <TypingIndicator/>}
                </>
              }
              <div ref={endRef}/>
            </div>
          </div>
          <div className="input-area border-t border-gray-700 px-4 py-4">
            <div className="flex space-x-3">
              <textarea value={inputMessage} onChange={e=>setInputMessage(e.target.value)} onKeyDown={e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();sendMessage();}}}
                placeholder="Message ChatGPT Clone..." className="flex-1 bg-gray-800 text-white border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 resize-none" rows="1"/>
              <button onClick={sendMessage} disabled={!inputMessage.trim()||isTyping} className="send-button px-4 py-3 text-white rounded-lg">
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>
              </button>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<ChatGPTClone/>, document.getElementById("root"));
  </script>
</body>
</html>
